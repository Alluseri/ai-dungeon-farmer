var EnableFastMode = false;

console.log("<[>AI Dungeon Farmer<]>");var e=!1,n=null,t=null,a=null,r=null,o=null;function i(e,n){return{operationName:"EventHookSendUserEvent",variables:{input:{eventName:e,variation:"web",clientInfo:n}},query:"mutation EventHookSendUserEvent($input: EventInput) {\n  sendUserEvent(input: $input)\n}\n"}}async function s(e){return await(await _aidfuck_fetch("https://api.aidungeon.io/graphql",{method:"POST",body:JSON.stringify(e),headers:{authorization:r,"content-type":"application/json",accept:"*/*"}})).json()}async function l(r,l){if(console.log("Pre-init routine complete."),e)for(;;){var d=1;try{d=Number.parseInt(await prompt("How much actions to add * 10?"))}catch{}for(var u={os:"web",model:o,version:"unknown"},c=i("ad_reward_button_press",u),p=i("ad_rewarded_reward_earned",u),m={operationName:"IncreaseAdCounterAdContext",variables:{},query:"mutation IncreaseAdCounterAdContext($addActions: Int) {\n  increaseAdCountdown(addActions: $addActions)\n}\n"},f={operationName:"UserContextGetAdCountdown",variables:{},query:"query UserContextGetAdCountdown {\n  adCountdown {\n    id\n    currentCount\n    enforceAds\n    shouldAutoplayAds\n    __typename\n  }\n}\n"},w=0;w<d;w++)EnableFastMode?(s(c),s(p),s(m)):(await s(c),await s(p),await s(m)),console.log("Now you have "+(await s(f)).data.adCountdown.currentCount+" actions."+(EnableFastMode?" Info may be outdated due to Fast Mode.":""))}else setTimeout((e=>{console.log(e),e("[style='align-items: center; display: flex; height: auto; justify-content: center; -webkit-box-align: center; -webkit-box-pack: center;']").parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.remove()}),200,r),n.innerHTML="<center><b>Refresh</b> the page after you're done farming.<br><i><small>Powered by catgirl supremacy</small></i></center>",t.innerText="+10 ACTIONS",r("#root").removeEventListener("click",l(r("#root")).click[0].listener),_backup=async function(){t.parentElement.parentElement.onclick=null,t.innerText="PLEASE WAIT...";var e={os:"web",model:navigator.userAgent.toLowerCase(),version:"unknown"},n=i("ad_reward_button_press",e),r=i("ad_rewarded_reward_earned",e),o={operationName:"IncreaseAdCounterAdContext",variables:{},query:"mutation IncreaseAdCounterAdContext($addActions: Int) {\n  increaseAdCountdown(addActions: $addActions)\n}\n"};EnableFastMode?(s(n),s(r),s(o)):(await s(n),await s(r),await s(o)),a.innerHTML="You have "+(await s({operationName:"UserContextGetAdCountdown",variables:{},query:"query UserContextGetAdCountdown {\n  adCountdown {\n    id\n    currentCount\n    enforceAds\n    shouldAutoplayAds\n    __typename\n  }\n}\n"})).data.adCountdown.currentCount+" Actions"+(EnableFastMode?"<br>Fast mode enabled: Info may be outdated.":""),t.parentElement.parentElement.onclick=_backup,t.innerText="+10 ACTIONS"},t.parentElement.parentElement.onclick=_backup}(async()=>{var i=!1;try{i=!!require}catch{i=!1}if(i)console.log("Running in Node.js environment."),_aidfuck_fetch=require("node-fetch"),rl=require("readline").createInterface(process.stdin,process.stdout),prompt=async e=>await new Promise((n=>rl.question(e,n))),r=process.argv[2]||await prompt("Enter your authtoken: "),o=process.argv[3]||(await prompt("Enter your useragent: ")).toLowerCase(),e=!0,l();else{if(console.log("Running in DevTools environment."),n=$('[style="color: rgb(153, 153, 153); font-family: HelveticaNeue-Light, Helvetica, sans-serif, Classic, alegreya_regular; font-size: 20px;"]'),t=$$('[style="color: rgb(255, 255, 255); font-family: HelveticaNeue-Light, Helvetica, sans-serif, Classic, alegreya_regular; font-size: 24px; padding-right: 8px; padding-left: 8px; text-transform: uppercase;"]').find((e=>"WATCH AN AD"==e.innerText)),a=$('[style="color: rgb(255, 255, 255); font-family: HelveticaNeue-Bold, Helvetica, sans-serif, Classic, alegreya_regular; font-size: 32px; margin-top: 64px; text-align: center;"]'),!n||!t)throw"Couldn't find a required HTML element.";n.innerHTML="<center>Welcome to AI Dungeon Farmer!<br>Made in a few boring hours by Alluseri<br><i><small>Ads were such a bad idea...<br>Now everyone gets to enjoy the ad-free experience.</small></i></center>",n.parentElement.style.alignSelf="center",t.innerText="INITIALIZE FARMER",_aidfuck_fetch=fetch,fetch=async function(e,n){var t=n.headers?.authorization;t&&!r&&(r=t)};var s=function(e,n){r?l(e,n):setTimeout(s,1e3,e,n)};(s=function(e,n){r?l(e,n):setTimeout(s,1e3,e,n)})($,getEventListeners)}})();